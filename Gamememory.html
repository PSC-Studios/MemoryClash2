<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Memory Spiel</title>
  <style>
    body {
      font-family: sans-serif;
      background: var(--background, linear-gradient(to right, #a1ffce, #faffd1));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    h1 {
      margin-top: 10px;
    }


#errorCount {
  font-size: 20px;
  margin-top: 10px;
  color: red;
}



    .grid {
      display: grid;
      gap: 10px;
      margin-top: 20px;
      justify-content: center;
    }

    .card {
      font-size: clamp(20px, 4vw, 36px);
      width: clamp(50px, 8vw, 80px);
      height: clamp(50px, 8vw, 80px);
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      cursor: pointer;
      user-select: none;
      border: 2px solid #888;
      transition: background 0.3s, transform 0.2s;
    }

    .card:hover {
      transform: scale(1.05);
    }

    .matched {
      background: lightgreen !important;
      cursor: default;
    }

    #gameOver {
      font-size: 24px;
      margin-top: 20px;
      color: green;
    }

    .button {
      padding: 10px 20px;
      margin-top: 20px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>üß† Memory Spiel</h1>
  <div id="gameContainer" class="grid"></div>
  <div id="gameOver" style="display:none;">üéâ Spiel beendet!</div>
  <button class="button" onclick="goBack()">üîô Zur√ºck</button>
<div id="errorCount">‚ùå Fehlversuche: 0</div>
  <script>
    // Lokale Daten laden
  


    const emojiPackName = localStorage.getItem("emojiPack") || "Animals üê∂"; // Testweise Animals
    const gridSize = localStorage.getItem("gridSize") || "4x4";
    const cardBackName = localStorage.getItem("cardBack") || "üîµ Blue";
    const backgroundName = localStorage.getItem("background") || "";

    const emojiPacks = {
      "Smileys üòÄ": ["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","ü§¢","üòµ‚Äçüí´",
 "üòé","ü§©","üòè","üôÉ","üòâ","üòú","üòù","üòõ","ü§ë","üò¨","ü§™","üò§",
"üò°","üò±","ü•≥","üò≥","üò¥","ü§§","ü§Ø","ü•∫","üòã","üòî","üòå","üòí",
"ü§ì","üòï","üôÑ","üò†","üò™","üò∑","ü§ß","ü§†","üòà","üëª","üíÄ","‚ò†Ô∏è",
"ü§°","üëΩ","ü§ñ","üéÉ","ü§•","üò∫"
] ,
      "Animals üê∂": ["üê∂", "üê±", "üê≠", "üêπ", "üê∞", "ü¶ä", "üêª", "üêº", "üê®", "üêØ", "ü¶Å", "üêÆ", "üê∑", "üê∏", "üêµ", "üêî", "üêß", "üê¢", "ü¶Ü", "ü¶â", "ü¶á", "ü¶Ñ"],
      "Foodüçï":["üçé","üçå","üçá","üçì","üçï","üçî","üçü","üå≠","üçø","üç©","ü•ê","üçû","ü•ñ","ü•®","üßÄ","ü•ö","üç≥","ü•û","ü•ì","üçó",  "üçñ","üç§","üç£","üçô","üçö","üçõ","üçú","ü•ó","üçù","ü•™",  "üåÆ","üåØ"],
    "Sport ‚öΩ": ["‚öΩ", "üèÄ", "üèà", "‚öæ", "üéæ", "üèê", "üèâ", "üé±", "üèì", "üè∏", "ü•Ö", "ü•ä", "‚õ≥", "üèπ", "ü•ã", "‚õ∑Ô∏è", "üèÇ", "üö¥‚Äç‚ôÇÔ∏è", "üèá"],
  "Weather ‚òÄÔ∏è": ["‚òÄÔ∏è", "üå§Ô∏è", "‚õÖ", "üå•Ô∏è", "üå¶Ô∏è", "üåßÔ∏è", "üå®Ô∏è", "üå©Ô∏è", "üå™Ô∏è", "üå´Ô∏è", "üå¨Ô∏è", "üåà", "üåÇ", "‚òÇÔ∏è", "‚õàÔ∏è", "‚ùÑÔ∏è", "‚òÅÔ∏è", "üåû"],
 "Tech üíª": [
  "üíª","üñ•Ô∏è","üñ®Ô∏è","‚å®Ô∏è","üñ±Ô∏è","üíæ","üì±","üì≤","üîã","üîå",
  "üß†","ü§ñ","üì°","üõ∞Ô∏è","üïπÔ∏è","üì∑","üì∏","üé•","üéûÔ∏è","üíø",
  "üìÄ","üóúÔ∏è","üìü","üì†","üîß","üî©","üß∞","üìä","üìà","üìâ",
  "üîç","üìé"
],

  "Space üåå": [
  "üåï","üåñ","üåó","üåò","üåë","üåí","üåì","üåî","üåô","‚≠ê",
  "üåü","‚ú®","üí´","üå†","‚òÑÔ∏è","üåå","ü™ê","üöÄ","üõ∞Ô∏è","üõ∏",
  "üî≠","üåö","üåõ","üåú","üå°Ô∏è","üåÉ","üåâ","üåÅ","ü™Ü","üå´Ô∏è",
  "üõ∏","üßë‚ÄçüöÄ"
],

"Nature üå≥": [
  "üå≤","üå≥","üå¥","üåµ","üåæ","üåø","üçÄ","üçÅ","üçÇ","üçÉ",
  "üåº","üå∏","üå∫","üåª","üåπ","ü™∑","ü™ª","ü™¥","üå±","ü™µ",
  "üåé","üåç","üåè","ü™®","üåã","‚õ∞Ô∏è","üèîÔ∏è","üèïÔ∏è","üèûÔ∏è","üõ§Ô∏è",
  "üåä","üíß"
],


 "Music üéµ": [
  "üéµ","üé∂","üéº","üé§","üéß","üé∑","üé∏","üéπ","ü•Å","üé∫",
  "üìª","üìÄ","üíø","üéôÔ∏è","üéöÔ∏è","üéõÔ∏è","ü™ï","ü™ó","üéûÔ∏è","üï∫",
  "üíÉ","üëØ","ü©∞","üéüÔ∏è","üé´","üé¨","üéß","üé§","üßë‚Äçüé§","üë®‚Äçüé§",
  "üë©‚Äçüé§","üìº"
],

  "Hearts ‚ù§Ô∏è": [
  "‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíñ",
  "üíó","üíì","üíû","üíï","üíò","üíù","üíü","‚ù£Ô∏è","üíî","üíå",
  "üí¢","üí§","üí•","ü´Ä","ü´Å","üí¨","üî¥","üî∑","üî∂","üî∏",
  "üîπ","üî∫"
],

"Uhren üïõ" :[

"üïõ","üïß","üïê","üïú","üïë","üïù","üï°","üïï","üï†","üïî","üïü","üïì",
"üïû","üïí","üïñ","üï¢","üïó","üï£","üïò","üï§","üïô","üï•","üïö","üï¶",
"üåë","üåí","üåì","üåî","üåï","üåñ","üåó","üåò","üåô","üåö","üåõ","üåú"
],

"B√ºro üìê": [

"üìê","‚úÇÔ∏è","üóÉ","üóÑ","üóë","üîí","üîì","üîè","üìè","üñá","üìé","üìç","üìå",
"üìâ","üìÇ","üóÇ","üìÖ","üìÜ","üóí","üóì","üìá","üìà","üìÅ","üíº","üìù","üñç",
"üñå","üñä","üñã","‚úíÔ∏è","‚úèÔ∏è","üó≥","üì≠","üì©","üì§","üì•","‚úâÔ∏è","üìß","üí≥",
"üßæ","üíµ","üí¥","üí∂","üí∑","üí∏","üì™","üì¶","üìì","üìö","üìô","üìò","üìó",
"üìñ","üìï","üìî"
],

"H√§nde üí™" :[

"üëã","ü§ö","üñê","‚úãÔ∏è","üññ","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô",
"üëà","üëÜ","üñï","üëá","‚òùÔ∏è","‚úäÔ∏è","üëä","ü§õ","ü§ú","üëè","üôå","üëê","ü§≤",
"ü§ù","üôè","‚úçÔ∏è","üíÖ","üí™"
],


"Fahrzeuge üöô" :[

"üöÇ","üöÉ","üöÑ","üöÖ","üöÜ","üöá","üöà","üöâ","üöä","üöù","üöû","üöã","üöå",
"üöç","üöé","üöê","üöë","üöí","üöì","üöî","üöï","üöñ","üöó","üöò","üöô","üõª",
"üöö","üöõ","üöú","üèé","üèç","üõµ","ü¶Ω","ü¶º","üõ∫","üö≤","üõ¥"
]










};


    const backgrounds = {
      "Sunset": "linear-gradient(to right, #ff7e5f, #feb47b)",
      "Ocean": "linear-gradient(to right, #43cea2, #185a9d)",
      "Mint": "linear-gradient(to right, #a1ffce, #faffd1)",
      "Dark": "#222",
      "Blue": "#4d79ff",
      "Peach": "linear-gradient(to right, #ffecd2, #fcb69f)",
      "Red" : "#ff4d4de",
      "Lavender" : "#e0bbff",
      "Sky": "linear-gradient(to right, #00c6ff, #0072ff)",
      "Fire": "linear-gradient(to right, #f12711, #f5af19)",
      "Babyblau": "#a9bff9",
      "neon-gr√ºn": "#27F584",
      "Aquamarin": "#66cdaa",
      "Rainbow1": "linear-gradient(90deg, #FF0000, #FF7F00, #FFFF00, #00FF00, #0000FF, #4B0082, #8B00FF)"


    };

    const cardBacks = {
      "üîµ Blue": "üîµ",
      "üî¥ Red": "üî¥",
      "üü¢ Green": "üü¢",
      "üßä Ice": "üßä",
      "üíé Diamond": "üíé",
      "üíÄ Skull": "üíÄ",
      "üåà Rainbow": "üåà",
      "üî• Flamme" : "üî•",
      "üê∞ Rabbit" : "üê∞",
      "üêº Panda" : "üêº",
      " Lime Heart üíö": "üíö"
    };

    // Hintergrund anwenden
    if (backgrounds[backgroundName]) {
      document.body.style.setProperty("--background", backgrounds[backgroundName]);
    }

    // Emoji-Pack laden
    const fallback = ["üòÄ", "üòÉ", "üòÑ", "üòÅ", "üòÜ", "üòÖ", "üòÇ", "ü§£", "üòä", "üòá"];
    const symbols = emojiPacks[emojiPackName] || fallback;

    const [cols, rows] = gridSize.split("x").map(n => parseInt(n));
    const totalCards = cols * rows;
    const pairsNeeded = totalCards / 2;

let errorCount = 0;

// Beispiel im Start-Skript von Gamememory.html:
localStorage.setItem("gridSize", "4x4");



    let selected = symbols.slice(0, pairsNeeded);
    while (selected.length < pairsNeeded) {
      selected = [...selected, ...symbols];
    }
    selected = selected.slice(0, pairsNeeded);

    const shuffled = [...selected, ...selected].sort(() => 0.5 - Math.random());
    const cardBack = cardBacks[cardBackName] || "‚ùî";

    const container = document.getElementById("gameContainer");
    container.style.gridTemplateColumns = `repeat(${cols}, auto)`;

    let firstCard = null;
    let lock = false;
    let matches = 0;

    shuffled.forEach(symbol => {
      const div = document.createElement("div");
      div.className = "card";
      div.dataset.symbol = symbol;
      div.innerText = cardBack;

      div.addEventListener("click", () => {
        if (lock || div.classList.contains("matched") || div.innerText === symbol) return;

        div.innerText = symbol;

        if (!firstCard) {
          firstCard = div;
        } else {
          lock = true;
setTimeout(() => {
  if (firstCard.dataset.symbol === div.dataset.symbol) {
    firstCard.classList.add("matched");
    div.classList.add("matched");
    matches++;
    if (matches === pairsNeeded) finishGame();
  } else {
    firstCard.innerText = cardBack;
    div.innerText = cardBack;
    errorCount++; // ‚ùå Fehler erh√∂hen
    document.getElementById("errorCount").innerText = `‚ùå Fehlversuche: ${errorCount}`;
    
  }
  firstCard = null;
  lock = false;
}, 800);

        }
      });

      container.appendChild(div);
    });

function finishGame() {
  document.getElementById("gameOver").style.display = "block";

  // Coins + Spielz√§hler
  let coins = parseInt(localStorage.getItem("coins") || "0");
  localStorage.setItem("coins", coins + 50);

  let games = parseInt(localStorage.getItem("gamesPlayed") || "0");
  localStorage.setItem("gamesPlayed", games + 1);

  // Gesamtfehler speichern
  localStorage.setItem("gesamtFehler", errorCount);

  // üí° Daily Quests aktualisieren
  // Quest 1: Spiele 1 Runde
  let q1 = parseInt(localStorage.getItem("quest_play1") || "0");
  localStorage.setItem("quest_play1", q1 + 1);

  // Quest 2: Fehlerfrei gewinnen
  if (errorCount === 0) {
    let q2 = parseInt(localStorage.getItem("quest_noError") || "0");
    localStorage.setItem("quest_noError", q2 + 1);
  }

  // Quest 3: Mit max. 5 Fehlern gewinnen
  if (errorCount <= 5) {
    let q3 = parseInt(localStorage.getItem("quest_under5Errors") || "0");
    localStorage.setItem("quest_under5Errors", q3 + 1);
  }
}

  
    function goBack() {
      window.location.href = "Analyse.html";
      }
      
  </script>
</body>
</html>
